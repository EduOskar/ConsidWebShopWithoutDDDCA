@page "/Checkout"
@inherits CheckoutBase


<h3 class="mb-5">Checkout</h3>
<div class="row">
    <div class="col-md-6">
        <h4 class="mb-2">Payment Method</h4>
        <div id="smart-button-container">
            <input type="hidden" name="descriptionInput" @bind="PaymentDescription" />
            <input name="amountInput" type="hidden" id="amount" @bind="PaymentAmount" />
        </div>
    </div>
</div>
@if (ShoppingCartCartItems == null)
{
    <DisplaySpinner />
}
else
{
    <div class="col-md-6">
        <h4 class="mb-2">Payment Summary</h4>
        @if (ShoppingCartCartItems.Count() > 0)
        {
            <table class="table">
                <thead>
                    <tr>
                        <th>PRoduct</th>
                        <th>Price</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in ShoppingCartCartItems)
                    {
                        <tr>
                            <td>@item.Qty x @item.ProductName</td>
                            <td>@item.TotalPrice.ToString("C")</td>
                        </tr>
                    }
                    <tr>
                        <td>Total</td>
                        <td><b>@PaymentAmount.ToString("C")</b></td>
                    </tr>
                </tbody>
            </table>
        }
        else
        {
            <p>Yoou currently have no items in your shopping cart</p>
        }
    </div>
}

@*Inputform*@
<EditForm class="vstack gap-3" Model="CheckoutForm" OnValidSubmit="SubmitAsync">
    <DataAnnotationsValidator></DataAnnotationsValidator>
    <div>
        <label class="form-label" for="FirstName">First Name: </label>
        <InputText id="FirstName" class="form-control"
                   @bind-Value="CheckoutForm.FirstName"></InputText>
        <ValidationMessage class="form-control" For="
    ()=>CheckoutForm.FirstName"></ValidationMessage>
    </div>

    <div>
        <label class="form-label" for="LastName">Last Name: </label>
        <InputText id="LastName" class="form-control"
                   @bind-Value="CheckoutForm.LastName"></InputText>
        <ValidationMessage class="form-control" For="
    ()=>CheckoutForm.LastName"></ValidationMessage>
    </div>

    <div>
        <label class="form-label" for="Adress">Adress: </label>
        <InputText id="Adress" class="form-control"
                   @bind-Value="CheckoutForm.Adress"></InputText>
        <ValidationMessage class="form-control" For="
    ()=>CheckoutForm.Adress"></ValidationMessage>
    </div>

    <div>
        <label class="form-label" for="Email">E-mail: </label>
        <InputText id="Email" class="form-control"
                   @bind-Value="CheckoutForm.Email"></InputText>
        <ValidationMessage class="form-control" For="
    ()=>CheckoutForm.Adress"></ValidationMessage>
    </div>

    <div>
        <label class="form-label" for="Phonenumber">PhoneNumber: </label>
        <InputText id="Phonenumber" class="form-control"
                   @bind-Value="CheckoutForm.Phonenumber"></InputText>
        <ValidationMessage class="form-control" For="
    ()=>CheckoutForm.Adress"></ValidationMessage>
    </div>


    <div>
        <button class="btn btn-primary"
                type="submit">
            Submit
        </button>
    </div>
</EditForm>
@*End of inputform*@





